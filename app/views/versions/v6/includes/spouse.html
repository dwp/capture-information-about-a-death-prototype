{% set isNotSpouseHtml %}
  {% call govukFieldset({
    legend: {
      text: "spouse_question" | translate,
      classes: "govuk-fieldset__legend--s",
      isPageHeading: false
    },
    classes: "spouse-group"
  }) %}
    {{ govukInput({
      label: {
        text: "full_name" | translate,
        classes: "govuk-!-font-weight-bold",
        attributes: {
          id: "spouse-full-name-group"
        }
      },
      id: "spouse-full-name",
      name: "spouse-full-name",
      classes: "govuk-!-width-two-thirds",
    value: data["spouse-full-name"]
    }) }}

    {{ govukInput({
      label: {
        text: "national_insurance" | translate,
        classes: "govuk-!-font-weight-bold",
        attributes: {
          id: "spouse-national-insurance-group"
        }
      },
      id: "spouse-national-insurance",
      name: "spouse-national-insurance",
      classes: "govuk-!-width-two-thirds",
      value: data["spouse-national-insurance"]
    }) }}

    {{ govukRadios({
      idPrefix: "spouse-sex",
      name: "spouse-sex",
      fieldset: {
        legend: {
          text: "caller_sex" | translate,
          isPageHeading: false,
          classes: "govuk-fieldset__legend--s"
        }
      },
      hint: {
        text: "spouse_sex_hint" | translate + " for BSP eligibility"
      },
      items: [
        {
          value: "female",
          text: "Female",
          checked: true if data['spouse-sex'] == 'female' else false
        },
        {
          value: "male",
          text: "Male",
          checked: true if data['spouse-sex'] == 'male' else false
        }
      ]
    }) }}

    {% set callerAddressHtml %}
      {% call govukFieldset({
        classes: 'address-group',
        legend: {
          html: "caller_address" | translate,
          classes: "govuk-fieldset__legend--s",
          isPageHeading: false
        }
      }) %}
        <div class="govuk-form-group">
          {% set prefix = "spouse" %}
          {% include "includes/address-lookup.html" %}
        </div>
      {% endcall %}
    {% endset %}

    {{ govukRadios({
      idPrefix: "spouse-address-conditional",
      name: "spouse-address",
      fieldset: {
        classes: "hide-address-fix",
        legend: {
          text: "caller_same_address" | translate,
          isPageHeading: false,
          classes: "govuk-fieldset__legend--s"
        }
      },
      items: [
        {
          value: true,
          text: "Yes",
          checked: true if data['spouse-address'] == 'true' else false
        },
        {
          value: false,
          text: "No",
          conditional: {
            html: callerAddressHtml
          }, checked: true if data['spouse-address'] == 'false' else false
        }
      ]
    }) }}
  {% endcall %}
{% endset -%}

{{ govukRadios({
  idPrefix: "is-spouse-spouse-conditional",
  name: "is-spouse-spouse",
  fieldset: {
    legend: {
      text: "Does the caller know the surviving spouse's details?",
      isPageHeading: false,
      classes: "govuk-fieldset__legend--s"
    }
  },
  items: [
    {
      value: "true",
      text: "Yes",
      conditional: {
        html: isNotSpouseHtml
      },
      checked: true if data['is-spouse-spouse'] == 'true' else false
    },
    {
      value: "false",
      text: "No",
      checked: true if data['is-spouse-spouse'] == 'false' else false
    }
  ]
}) }}

{{ govukButton({
  text: "final_step_continue" | translate,
  id: "continue-to-benefits"
}) }}
