<h2 class="govuk-heading-m">{{"deceased_heading" | translate}}</h2>

{% set deceasedAddressHtml %}
  {% call govukFieldset({
    classes: 'address-group',
    legend: {
      html: "deceased_address" | translate,
      classes: "govuk-fieldset__legend--s",
      isPageHeading: false
    }
  }) %}
    <div class="govuk-form-group">
      {% set prefix = "deceased" %}
      {% include "versions/base/includes/address/find.html" %}
    </div>
  {% endcall %}
{% endset %}

{% set hospitalInfoHtml %}
  {% include "versions/base/includes/hospital/autocomplete.html" %}
{% endset %}

{{ govukDateInput({
  id: "deceased-dod",
  name: "deceased-dod",
  fieldset: {
    legend: {
      text: "dod_title" | translate,
      isPageHeading: false,
      classes: "govuk-fieldset__legend--s"
    }
  },
  items: [
    {
      name: "day",
      value: data['deceased-dod-day']
    },
    {
      name: "month",
      value: data['deceased-dod-month']
    },
    {
      name: "year",
      value: data['deceased-dod-year']
    }
  ]
  })
}}

{{ govukRadios({
  idPrefix: "is-uk-resident-conditional",
  name: "is-uk-resident",
  fieldset: {
    legend: {
      text: "is_uk_resident" | translate,
      isPageHeading: false,
      classes: "govuk-fieldset__legend--s"
    }
  },
  items: [
    {
      value: "true",
      text: "Yes",
      checked: true if data['is-uk-resident'] == 'true' else false
    },
    {
      value: "false",
      text: "No",
      conditional: {
        html: deceasedAddressHtml
      },
      checked: true if data['is-uk-resident'] == 'false' else false
    }
  ]
}) }}

{{ govukRadios({
  idPrefix: "hospital-death-conditional",
  name: "hospital-death",
  fieldset: {
    legend: {
      text: "hospital_question" | translate,
      isPageHeading: false,
      classes: "govuk-fieldset__legend--s"
    }
  },
  items: [
    {
      value: true,
      text: "Yes",
      conditional: {
        html: hospitalInfoHtml
      },
      checked: true if data['hospital-death'] == 'true' else false
    },
    {
      value: false,
      text: "No",
      checked: true if data['hospital-death'] == 'false' else false
    }
  ]
}) }}

{# This is actually the FEP benefits, make checked #}
{{ govukCheckboxes({
  idPrefix: "qualifying-benefits",
  name: "deceased-qualifying-benefits",
  fieldset: {
    legend: {
      text: "Do you get at least one of the following qualifying benefits?",
      isPageHeading: false,
      classes: "govuk-fieldset__legend--s"
    }
  },
  hint: {
    text: "You can also apply if you or your partner are waiting to hear about a claim."
  },
  items: [
    {
      value: "income-support",
      text: "income_support" | translate
    },
    {
      value: "income-jsa",
      text: "income_jsa" | translate
    },
    {
      value: "income-esa",
      text: "income_esa" | translate
    },
    {
      value: "pension-credit",
      text: "pension_credit" | translate
    },
    {
      value: "housing-benefit",
      text: "housing_benefit" | translate
    },
    {
      value: "sd-wtc",
      text: "sd_wtc" | translate
    },
    {
      value: "child-tax-credit",
      text: "child_tax_credit" | translate
    },
    {
      value: "smi",
      text: "smi" | translate
    }
  ]
}) }}

{{ govukButton({
  text: "final_step_continue" | translate,
  id: "continue-to-deceased"
}) }}